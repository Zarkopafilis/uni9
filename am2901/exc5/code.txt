MICRO

c BOOTSTRAP
m00 00000 000 000 111 000 011 pcpc pcpc 00 0111010111
m01 00000 000 000 000 000 001 0000 0000 00 0010000000

c LOAD R, $K
m02 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // K at MDR
m03 00000 000 000 111 000 001 0000 0000 00 0111011101 // $K -> MDR 
m04 00000 000 000 111 000 011 bbbb bbbb 00 0110011101 // $K -> B 
m05 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R -> MDR
m06 00000 000 000 000 000 001 1011 1011 00 0110011101 // R -> FB
m07 00000 000 000 100 000 011 bbbb bbbb 00 0010011111 // B + 0 -> R | ZB ? ZA
c NEXTINSTR
m08 00000 000 000 101 000 011 pcpc pcpc 01 0111011110
m09 00000 000 000 000 000 001 0000 0000 00 0010000000

c STORE R, $K
m0a 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R -> MDR 
m0b 00000 000 000 111 000 011 bbbb bbbb 00 0110011101 // R -> B 
m0c 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // K -> MDR
m0d 00000 000 000 111 000 001 0000 0000 00 0111011101 // K -> MAR
m0e 00000 000 000 100 000 001 bbbb bbbb 00 0110011111 // B + 0 -> FB
m0f 00000 000 000 011 000 001 0000 0000 00 0000011111 // FB + 0 -> MWE~
c NEXTINSTR
m10 00000 000 000 101 000 011 pcpc pcpc 01 0111011110
m11 00000 000 000 000 000 001 0000 0000 00 0010000000

c ADD R1, $K
m12 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // K at MDR
m13 00000 000 000 111 000 001 0000 0000 00 0111011101 // $K -> MDR 
m14 00000 000 000 111 000 011 bbbb bbbb 00 0110011101 // $K -> B 
m15 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R -> MDR
m16 00000 000 000 000 000 001 1011 1011 00 0110011101 // R -> FB
m17 00000 000 000 001 000 011 bbbb 0000 00 0010011111 // B + FB -> R
c NEXTINSTR
m18 00000 000 000 101 000 011 pcpc pcpc 01 0111011110
m19 00000 000 000 000 000 001 0000 0000 00 0010000000

c SUB R1, $K
m1a 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // K at MDR
m1b 00000 000 000 111 000 001 0000 0000 00 0111011101 // $K -> MDR 
m1c 00000 000 000 111 000 011 bbbb bbbb 00 0110011101 // $K -> B 
m1d 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R -> MDR
m1e 00000 000 000 000 000 001 1011 1011 00 0110011101 // R -> FB
m1f 00000 000 000 001 001 011 bbbb 0000 00 0010011111 // FB - B -> R (S - R)
c NEXTINSTR
m20 00000 000 000 101 000 011 pcpc pcpc 01 0111011110
m21 00000 000 000 000 000 001 0000 0000 00 0010000000

c ADD R1, R2
m22 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R2 -> MDR 
m23 00000 000 000 000 000 001 1011 1011 00 0110011101 // R2 -> FB
m24 00000 000 000 011 000 000 0000 0000 00 0010011111 // FB + 0 -> Q
m25 00000 000 000 110 000 011 bbbb bbbb 00 0110011110 // Q + 0(DD) -> B  
m26 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R1 -> MDR
m27 00000 000 000 000 000 001 1011 1011 00 0110011101 // R1 -> FB
m28 00000 000 000 011 000 011 0000 0000 00 0010011111 // FB + B -> R1
c NEXTINSTR
m29 00000 000 000 101 000 011 pcpc pcpc 01 0111011110
m2a 00000 000 000 000 000 001 0000 0000 00 0010000000

c SHL R
m2b 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R to MDR
m2c 00000 000 000 000 000 001 1011 1011 00 0110011101 // R to feedback reg
m2d 00000 000 000 100 000 110 1001 1010 00 0010011111
c NEXTINSTR
m2e 00000 000 000 101 000 011 pcpc pcpc 01 0111011110
m2f 00000 000 000 000 000 001 0000 0000 00 0010000000

c DEC R 
m30 00000 000 000 101 000 011 pcpc pcpc 01 0111011110 // R to MDR
m31 00000 000 000 000 000 001 1011 1011 00 0110011101 // R to feedback reg
m32 00000 000 000 101 000 011 1010 1010 01 0110111110
c NEXTINSTR
m33 00000 000 000 101 000 011 pcpc pcpc 01 0111011110
m34 00000 000 000 000 000 001 0000 0000 00 0010000000

c HALT
m35 00000 010 000 000 000 000 0000 0000 00 0111011110

MAPPER

c LOAD R, $K
m00
c STORE R, $K
m01
c ADD R1, $K
m02
c SUB R1, $K
m03
c ADD R1, R2
m04
c SHL R
m05
c DEC R 
m06
c HALT
m07

MAIN

c LOAD r2, $X
m00 00
m01 $X 
m02 02
c ADD r2, $Y
m03 02
m04 $Y
m05 02
c DEC r2
m06 06
m07 02
c LOAD r1, $Z
m08 00
m09 $Z
m0a 01
c ADD r1, r2
m0b 04
m0c 02
m0d 01
c SHL r1
m0e 05
m0f 01
c SHL r1
m10 05 
m11 01
c SHL r2
m12 05
m13 02
c ADD r1, r2
m14 04
m15 02
m16 01
c STORE r1, $W
m17 01
m18 01
m19 $W
c HALT
m1a 07

c -DATA-
