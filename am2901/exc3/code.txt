MICRO

c Bootstrap
m00 00000 000 000 111 000 011 0000 pcpc 00 0111010111
m01 00000 000 000 000 000 001 0000 0000 00 0010000000

c LDA $K, X - as of ex2
m02 00000 000 000 101 000 011 xxxx pcpc 01 0111011110 // K at MDR on next clock
m03 00000 000 000 101 000 001 xxxx bbbb 00 0101011101 // MDR + B (X) -> MAR 
m04 00000 000 000 111 000 011 xxxx aaaa 00 0110011101 // val -> Accumulator
c NEXTINSTR
m05 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m06 00000 000 000 000 000 001 0000 0000 00 0010000000

c LDX #K - as of exc2
m07 00000 000 000 101 000 011 xxxx pcpc 01 0111011110 // K at MDR on next clock
m08 00000 000 000 111 000 011 xxxx bbbb 00 0110011101 // K -> B (X - Helper register)
c NEXTINSTR
m09 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m0a 00000 000 000 000 000 001 0000 0000 00 0010000000

c STA $K, X
m0b 00000 000 000 101 000 011 xxxx pcpc 01 0111011110 //K at MDR
fixme m0c 00000 000 000 111 000 011 xxxx bbbb 00 0011011101 //MDR + B -> MOP, MAR 
m0d 00000 000 000 100 000 001 0000 0000 00 0100011111 //ACC + 0 -> NOP, MWE~
c NEXTINSTR
m0e 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m0f 00000 000 000 000 000 001 0000 0000 00 0010000000

c FIXME - BOTTOM 
c INX 
m10 00000 000 000 add xxxx bbbb 01 ddatae
c NEXTINSTR
m11 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m12 00000 000 000 000 000 001 0000 0000 00 0010000000

c CMPX #Y
m13 00000 000 000 101 000 011 xxxx pcpc 01 0111011110 // K at MDR on next clock
m14 00000 000 000 sub xxxx bbbb xx mdrselect
c NEXTINSTR
m15 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m16 00000 000 000 000 000 001 0000 0000 00 0010000000

c ADC $K, Y
m17 00000 000 000 101 000 011 xxxx pcpc 01 0111011110 // $K at MDR 
m18 00000 000 000 add mdrr bbbb to mar 
m19 00000 000 000 add mdrr aaaa to acc with carry!!
c NEXTINSTR
m1a 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m1b 00000 000 000 000 000 001 0000 0000 00 0010000000

c CRC 
m1c 00000 000 000 sub xxxx xxxx 00 ddatae, z, update status flags
c NEXTINSTR
m1d 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m1e 00000 000 000 000 000 001 0000 0000 00 0010000000

c SHLA 
m1f 00000 000 000 shift acc-> ramqu into acc (xxxx - aaaa) xx 
c NEXTINSTR
m20 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m21 00000 000 000 000 000 001 0000 0000 00 0010000000

c HALT 
m22 unconditional jump offset 0 xxxx xxxx xx

c BRNZ $K
m23 conditional jump macro zero flag xxxx xxxx
c NEXTINSTR
m24 00000 000 000 101 000 011 xxxx pcpc 01 0111011110
m25 00000 000 000 000 000 001 0000 0000 00 0010000000


MAPPER

c LDA $K, X 
m00
c LDX #K
m01
c INX 
m02 
c CMPX #Y
m03 
c STA $K, X 
m04
c ADC $K, X 
m05
c CRC 
m06
c BRNZ $K
m07
c SHLA 
m08
c HALT
m09

MAIN

c CRC
m00 06
c LDX #0
m01 01
m02 0
c LDA $Z, X 
m03 00
m04 1f
c SHLA
m05 08
c ADC $Y, X 
m06 05
m07 18
c STA $W, X  
m08 04 
m09 10 
c INX 
m0a 02
c CMPX #7
m0b 03
m0c 7
c BRNZ $01 // after CRC 
m0d 07
m0e 01
c HALT
m0f 09

c -- Data Region --
c W[0:7]
m10  
m11 
m12
m14 
m15
m16
m17

c Y[0:7]
m18
m19
m1a
m1b
m1c
m1d
m1e

c Z[0:7]
m1f
m20 
m21
m22
m23
m24
m25 